(this["webpackJsonppicco-admin"]=this["webpackJsonppicco-admin"]||[]).push([[0],{215:function(e,t,a){e.exports=a.p+"static/media/favicon.39971fa2.png"},280:function(e,t,a){e.exports=a(595)},366:function(e,t,a){},440:function(e,t,a){},487:function(e,t,a){},498:function(e,t,a){},499:function(e,t,a){},594:function(e,t,a){},595:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(5),o=a.n(c),l=a(44),i=a.n(l),s=a(52),u=a(60),m=a(609),d=a(141),p=(a(295),a(8)),f=Object(n.createContext)();function h(e){var t=e.children,a=Object(n.useState)(!1),c=Object(p.a)(a,2),o=c[0],l=c[1],i=Object(n.useState)("dark"),s=Object(p.a)(i,2),u=s[0],m=s[1],d=Object(n.useState)(!1),h=Object(p.a)(d,2),g=h[0],b=h[1],E=Object(n.useState)(null),O=Object(p.a)(E,2),y=O[0],v=O[1],j=Object(n.useState)(!1),S=Object(p.a)(j,2),C=S[0],k=S[1],w=Object(n.useState)(null),z=Object(p.a)(w,2),N=z[0],x={sideBarCollapsed:o,setCollapsed:l,theme:u,setTheme:m,loading:g,setLoading:b,error:y,setError:v,successNotification:C,setSuccessNotification:k,setHeaderComponent:z[1],headerComponent:N};return r.a.createElement(f.Provider,{value:x},t)}var g=a(45),b="SET_CATEGORIES",E="INIT_CATEGORIES",O="SET_COLORS",y="INIT_COLORS",v="SET_SIZES",j="INIT_SIZES",S=[],C=function(e,t){switch(t.type){case b:return{categories:t.payload};case E:return{categories:S};default:throw new Error("Unexpected action")}},k=[],w=function(e,t){switch(t.type){case O:return{colors:t.payload};case y:return{colors:k};default:throw new Error("Unexpected action")}},z=[],N=function(e,t){switch(t.type){case v:return{sizes:t.payload};case j:return{sizes:z};default:throw new Error("Unexpected action")}},x=a(46),I=a.n(x),_=a(69),P=a(184),F=a.n(P),D="".concat("localhost"===window.location.hostname?"http://localhost:1000":window.location.origin),T=F.a.create({baseURL:"".concat(D,"/adminAPI/")}),L=function(e){e?T.defaults.headers.common.Authorization=e:delete T.defaults.headers.common.Authorization},V=function(e){return e?e.response&&e.response.data?e.response.data.errorMessage||e.message||"Generic error happened":e.message?e.message:"Generic error happened":"Generic error happened"},A=function(e,t){return e&&e.data&&e.data.data?e.data.data:t||{}};var H=function(e){var t=Object(n.useState)(null),a=Object(p.a)(t,2),r=a[0],c=a[1],o=Object(n.useState)(e),l=Object(p.a)(o,2),i=l[0],s=l[1],u=Object(n.useContext)(f),m=u.loading,d=u.setLoading,h=u.error,g=u.setError,b=u.setSuccessNotification;Object(n.useEffect)((function(){var t=function(){var t=Object(_.a)(I.a.mark((function t(){var a,n,r;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:g(null),b(!1),t.prev=2,d(!0),a=null,t.t0=i.method,t.next="GET"===t.t0?8:"POST"===t.t0?12:"FILE_POST"===t.t0?16:22;break;case 8:return t.next=10,T.get(i.url);case 10:return a=t.sent,t.abrupt("break",33);case 12:return t.next=14,T.post(i.url,i.params);case 14:return a=t.sent,t.abrupt("break",33);case 16:for(r in n=new FormData,i.params)n.append(r,i.params[r]);return t.next=20,T.post(i.url,n,{headers:{"Content-Type":"application/x-www-form-urlencoded"}});case 20:return a=t.sent,t.abrupt("break",33);case 22:if(!i.params){t.next=28;break}return t.next=25,T.post(i.url,i.params);case 25:t.t1=t.sent,t.next=31;break;case 28:return t.next=30,T.get(i.url);case 30:t.t1=t.sent;case 31:return a=t.t1,t.abrupt("break",33);case 33:c(a),i.onSuccess&&i.onSuccess(A(a)),e&&e.onSuccess&&e.onSuccess(A(a)),i.showSuccessNotification&&b(i.successMessage||"request has been done successfully."),t.next=44;break;case 39:t.prev=39,t.t2=t.catch(2),i.onError&&i.onError(t.t2),e&&e.onError&&e.onError(t.t2),g(t.t2);case 44:return t.prev=44,d(!1),t.finish(44);case 47:case"end":return t.stop()}}),t,null,[[2,39,44,47]])})));return function(){return t.apply(this,arguments)}}();i&&t(),s(null)}),[i]);var E=i&&i.defaultValue||e&&e.defaultValue;return{data:A(r,E),error:h,loading:m,doFetch:s}};var R=function(e){var t=Object(n.useRef)();return Object(n.useEffect)((function(){t.current=e}),[e]),t.current},M={login:"/login",dashboardRetrive:"/dashboard-retrive",categoryList:"/category",sizeList:"/size",colorList:"/color",imageUpload:"/productImage/create",productCreate:"/product/create",productUpdate:function(e){var t=e.slug;return"/product/".concat(t,"/update")},productListGet:"/product",productItemGet:function(e){var t=e.slug;return"/product/".concat(t)},productDelete:function(e){var t=e.slug;return"/product/".concat(t,"/delete")},categoryDelete:function(e){var t=e.slug;return"/category/".concat(t,"/delete")},categoryUpdate:function(e){var t=e.slug;return"/category/".concat(t,"/update")},categoryCreate:"/category/create",sizeCreate:"/size/create",sizeDelete:function(e){var t=e.slug;return"/size/".concat(t,"/delete")},sizeUpdate:function(e){var t=e.slug;return"/size/".concat(t,"/update")},colorCreate:"/color/create",colorDelete:function(e){var t=e.slug;return"/color/".concat(t,"/delete")},colorUpdate:function(e){var t=e.slug;return"/color/".concat(t,"/update")},demandsList:"/productUserDemands",subscribersList:"/subscribers",usersList:"/users"},U="FIRST",J="LAST",B="/admin-dashboard";function G(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function W(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?G(a,!0).forEach((function(t){Object(g.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):G(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var q=Object(n.createContext)();function K(e){var t=e.children,a=Object(n.useReducer)(C),c=Object(p.a)(a,2),o=c[0],l=c[1],s=Object(n.useReducer)(N),u=Object(p.a)(s,2),m=u[0],d=u[1],f=Object(n.useReducer)(w),h=Object(p.a)(f,2),g=h[0],S=h[1],k=function(e){l({type:b,payload:e})},z=function(e){d({type:v,payload:e})},x=function(e){S({type:O,payload:e})},I=H().doFetch,_=H().doFetch,P=H().doFetch,F=function(){I({url:M.categoryList,onSuccess:k})},D=function(){_({url:M.sizeList,onSuccess:z})},T=function(){P({url:M.colorList,onSuccess:x})},L=i.a.get("authenticationToken");Object(n.useEffect)((function(){L&&(F(),D(),T())}),[L]);var V={data:W({},o,{},m,{},g),setCategories:k,initCategories:function(){l({type:E})},setSizes:z,initSizes:function(){d({type:j})},setColors:x,initcolors:function(){S({type:y})},doCategoriesFetch:F,doSizesFetch:D,doColorsFetch:T};return r.a.createElement(q.Provider,{value:V},t)}var Z=a(596),Y=a(193),$=a(4),Q=a(265),X=a.n(Q),ee=Z.a.Sider;var te=Object(u.g)((function(e){var t=e.location.pathname,c=function(e){return!!X()(e).exec(t)},o=Object(n.useContext)(f),l=o.sideBarCollapsed,i=o.setCollapsed,u=o.theme;return r.a.createElement(ee,{collapsible:!0,collapsed:l,onCollapse:function(){return i(!l)}},r.a.createElement("a",{href:B,className:"logo"},r.a.createElement("img",{src:a(215),alt:""})),r.a.createElement(Y.a,{theme:u,mode:"inline",activeKey:t,selectedKeys:[t]},ht.map((function(e){var a=e.path,n=e.showAlways,o=e.icon,l=e.name;return r.a.createElement(Y.a.Item,{key:c(a)?t:a},(n||c(a))&&r.a.createElement(s.b,{to:a},r.a.createElement($.a,{type:o}),r.a.createElement("span",{className:"nav-text"},l)))}))))})),ae=a(607),ne=Z.a.Header;var re=function(){var e=Object(n.useContext)(f).headerComponent,t=Object(n.useState)(!1),a=Object(p.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)(!1),s=Object(p.a)(l,2),m=s[0],d=s[1];return r.a.createElement(ne,null,m&&r.a.createElement(u.a,{to:"/login"}),r.a.createElement("div",{className:"header-wrapper"},r.a.createElement("div",{className:"page-header"},e),r.a.createElement($.a,{type:"logout",onClick:function(){return o(!0)},className:"logout-icon"})),r.a.createElement(ae.a,{title:"Log out from dashboard",visible:c,onOk:function(){i.a.set("authenticationToken",null),d(!0)},onCancel:function(){return o(!1)}},"would you really like to log out?"))},ce=Z.a.Footer;var oe=function(){return r.a.createElement(ce,null,"piccoloveliero \xa9",(new Date).getFullYear())},le=Z.a.Content;var ie=function(){var e=Object(n.useContext)(f).sideBarCollapsed;return r.a.createElement(Z.a,{style:{marginLeft:e?"80px":"200px"}},r.a.createElement(te,null),r.a.createElement(Z.a,null,r.a.createElement(re,null),r.a.createElement(le,null,r.a.createElement(u.d,null,ht.map((function(e){return r.a.createElement(u.b,{exact:!0,key:e.path,path:e.path,component:e.component})})),r.a.createElement(u.a,{to:"/"}))),r.a.createElement(oe,null)))},se=a(604),ue=a(608),me=a(48);a(366);var de=se.a.create({name:"loginForm"})((function(e){var t=e.form,n=t.getFieldDecorator,c=t.validateFields,o=!!i.a.get("authenticationToken"),l=H(),s=l.data.token,m=l.doFetch;s&&(i.a.set("authenticationToken",s),L(s));var d=function(){var e=Object(_.a)(I.a.mark((function e(t){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.t0=m,e.t1=M.login,e.next=5,c();case 5:e.t2=e.sent,e.t3={url:e.t1,params:e.t2},(0,e.t0)(e.t3);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return s||o?r.a.createElement(u.a,{to:"/"}):r.a.createElement(Z.a,{className:"login-layout"},r.a.createElement("img",{src:a(215),alt:""}),r.a.createElement(se.a,{onSubmit:d,className:"login-form"},r.a.createElement(se.a.Item,null,n("userName",{rules:[{required:!0,message:"Please enter your username!"}]})(r.a.createElement(ue.a,{prefix:r.a.createElement($.a,{type:"user",className:"input-icon"}),placeholder:"Username",size:"large"}))),r.a.createElement(se.a.Item,null,n("password",{rules:[{required:!0,message:"Please enter your Password!"}]})(r.a.createElement(ue.a,{prefix:r.a.createElement($.a,{type:"lock",className:"input-icon"}),type:"password",placeholder:"Password",size:"large"}))),r.a.createElement(se.a.Item,null,r.a.createElement(me.a,{type:"primary",htmlType:"submit",size:"large"},"Log in"))))})),pe=a(603),fe=a(108),he=a(597),ge=a(95),be=a(94),Ee=a(55),Oe=a(62),ye=function(e,t){var a=function(){var a=this;this.data={},e&&Array.isArray(e)?(e.forEach((function(e){a.data[e[t]]=e})),this.size=e.length):this.size=0};return a.prototype.keys=function(){return Object.keys(this.data)},a.prototype.values=function(){return Object.values(this.data)},new a},ve=function(e,t){for(var a,n,r=[],c={},o=0,l=e.length;o<l;o++)c[(a=e[o]).id]=a,c[a.id].children=[],c[a.id].key=a.id;for(var i in c)c.hasOwnProperty(i)&&((n=c[i])[t||"parent_id"]?c[n[t||"parent_id"]].children.push(n):r.push(n));return r},je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.toLowerCase().replace(/ /g,"-").replace(/[^\w-]+/g,"")},Se=function(e){for(var t=[],a=0;a<e.length;++a){var n=e[a];if(-1!==t.indexOf(n))return!0;t.push(n)}return!1},Ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return t?"".concat(e.substring(0,10)," ").concat(e.substring(11,16)):e.substring(0,10)};a(440);function ke(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var we=pe.a.Meta,ze=fe.a.Option;var Ne=function(){var e=Object(n.useContext)(f).setHeaderComponent,t=Object(n.useContext)(q).data.categories,a=void 0===t?[]:t,c=H({url:M.productListGet,defaultValue:[],onSuccess:function(e){y(e)}}),o=c.doFetch,l=c.data,i=H().doFetch,u=Object(n.useState)(null),m=Object(p.a)(u,2),d=m[0],h=m[1],b=Object(n.useState)([]),E=Object(p.a)(b,2),O=E[0],y=E[1],v=Object(n.useState)(""),j=Object(p.a)(v,2),S=j[0],C=j[1],k=Object(n.useState)(""),w=Object(p.a)(k,2),z=w[0],N=w[1],x=ve(a),I=R(O),_=R(a);Object(n.useEffect)((function(){var t=JSON.stringify(I)!==JSON.stringify(O),n=JSON.stringify(_)!==JSON.stringify(a);(t||n)&&e(r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"filter-item"},r.a.createElement("b",null,"Products count: ",O.length)),r.a.createElement("div",{className:"filter-item"},r.a.createElement("b",null,"Category:"),r.a.createElement(fe.a,{value:S,className:"filter-select",onChange:F},r.a.createElement(ze,{value:""},"All"),x.map((function(e,t){return r.a.createElement(ze,{value:e.id,key:t},e.name)})))),r.a.createElement("div",{className:"filter-item"},r.a.createElement("b",null,"Search by name:"),r.a.createElement(ue.a,{className:"filter-by-name",onChange:T,placeholder:"product name"}))))}),[l,O,a]),Object(n.useEffect)((function(){return function(){e(null)}}),[]);var P=function(e){h(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ke(a,!0).forEach((function(t){Object(g.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ke(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e))},F=function(e){C(e);var t=e?l.filter((function(t){return t.category_id===e})):l;z&&(t=t.filter((function(e){return e.name.toLowerCase().includes(z)||e.slug.toLowerCase().includes(z)}))),y(t)},T=function(e){var t=e.target.value;N(t);var a=t?l.filter((function(e){return e.name.toLowerCase().includes(t)||e.slug.toLowerCase().includes(t)})):l;S&&(a=a.filter((function(e){return e.category_id===S}))),y(a)};return 0===O.length?r.a.createElement(ge.a,{description:"No products found!"}):r.a.createElement(be.a,{className:"product-list-wrapper",gutter:[30,30]},O.map((function(e,t){return r.a.createElement(Ee.a,{span:6,key:e.slug},r.a.createElement(pe.a,{cover:(a=e.colors,0!==a.length&&a[0].images&&0!==a[0].images.length&&a[0].images[0].image_name?r.a.createElement("img",{alt:"example",className:"product-first-image",src:"".concat(D).concat(a[0].images[0].small_image_link)}):r.a.createElement(he.a,{shape:"square",size:140,icon:r.a.createElement($.a,{type:"smile",theme:"outlined"}),className:"avatar-image"})),actions:[r.a.createElement(Oe.a,{placement:"top",title:"Delete"},r.a.createElement($.a,{type:"delete",key:"delete",onClick:function(){return P(e)}})),r.a.createElement(Oe.a,{placement:"top",title:"Update"},r.a.createElement(s.b,{to:"product/".concat(e.slug)},r.a.createElement($.a,{type:"edit",key:"edit"}))),r.a.createElement(Oe.a,{placement:"top",title:"Look"},r.a.createElement("a",{href:"".concat(D,"/").concat(e.slug),target:"_blank"},r.a.createElement($.a,{type:"link",key:"link"})))]},r.a.createElement(we,{title:e.name,description:"".concat(e.category_slug," ").concat(e.category_type_slug?"-".concat(e.category_type_slug):"")})));var a})),r.a.createElement(ae.a,{title:"Delete product: ".concat(d&&d.name),visible:!!d,onOk:function(){i({url:M.productDelete({slug:d.slug}),method:"POST",onSuccess:function(e){o({url:M.productListGet}),h(null)}})},onCancel:function(){return h(null)}},"Do you confirm deleteing the product?"))},xe=a(35),Ie=a(606),_e=a(598),Pe=a(599),Fe=a(602),De=a(273),Te=a.n(De),Le=(a(486),{toolbar:[["bold","italic","underline","strike","blockquote"],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],["link","image"]],clipboard:{matchVisual:!1}}),Ve=["header","font","size","bold","italic","underline","strike","blockquote","list","bullet","indent","link","image","video"];var Ae=function(e){var t=e.placeholder,a=void 0===t?"":t,c=e.onChangeHandler,o=e.initialValue,l=void 0===o?"":o,i=Object(n.useState)(""),s=Object(p.a)(i,2),u=s[0],m=s[1];return Object(n.useEffect)((function(){!u&&l&&m(l)}),[l]),r.a.createElement(Te.a,{onChange:function(e){m(e),c(e)},value:u,modules:Le,formats:Ve,placeholder:a})};a(487);function He(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Re(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?He(a,!0).forEach((function(t){Object(g.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):He(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Me=Ie.a.Title,Ue=fe.a.Option;var Je=se.a.create({name:"loginForm"})((function(e){var t=e.form,a=e.handleFormSubmit,c=e.productsList,o=void 0===c?[]:c,l=e.productObj,i=void 0===l?{}:l,s=t.getFieldDecorator,u=t.validateFields,d=t.setFieldsValue,f=t.getFieldValue,h=t.getFieldsValue,b=Object(n.useContext)(q).data,E=b.categories,O=void 0===E?[]:E,y=b.sizes,v=void 0===y?[]:y,j=b.colors,S=void 0===j?[]:j,C=ve(O),k=Object(n.useState)([]),w=Object(p.a)(k,2),z=w[0],N=w[1],x=Object(n.useState)([]),P=Object(p.a)(x,2),F=P[0],T=P[1],L=Object(n.useState)([0]),V=Object(p.a)(L,2),A=V[0],B=V[1],G=Object(n.useState)([0]),W=Object(p.a)(G,2),K=W[0],Z=W[1],Y=Object(n.useState)({0:[]}),Q=Object(p.a)(Y,2),X=Q[0],ee=Q[1],te=H().doFetch,ae=R(i),ne=R(C);Object(n.useEffect)((function(){var e=JSON.stringify(ae)!==JSON.stringify(i),t=JSON.stringify(ne)!==JSON.stringify(C);(e||t)&&(i.category&&ce(i.category),i.type&&oe(i.type),i.type&&d({type:i.type}),i.sizeFieldsCountArr&&B(i.sizeFieldsCountArr),i.colorFieldsCountArr&&Z(i.colorFieldsCountArr),i.imageListObj&&ee(i.imageListObj))}),[i,C]);var re=function(){var e=Object(_.a)(I.a.mark((function e(t){var n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,u();case 3:n=e.sent,a(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ce=function(e){var t=C.findIndex((function(t){var a=t.id;return e==a}));N(C[t]?C[t].children:[]),d({type:void 0})},oe=function(e){var t=z.findIndex((function(t){var a=t.id;return e==a}));T(z[t]?z[t].children:[]),d({tag:void 0})},le=function(e){m.a.warning({placement:"bottomRight",message:"An error occured!",duration:4,description:e})};return r.a.createElement(be.a,null,r.a.createElement(se.a,{onSubmit:re,className:"form-wrapper"},r.a.createElement(be.a,null,r.a.createElement(Ee.a,{span:12},r.a.createElement(se.a.Item,{label:"Name:"},s("name",{initialValue:i.name,rules:[{required:!0,message:"Please enter product name!"}]})(r.a.createElement(ue.a,{placeholder:"product name",size:"large"})))),r.a.createElement(Ee.a,{span:12})),r.a.createElement(_e.a,null),r.a.createElement(be.a,{gutter:[20,0]},r.a.createElement(Ee.a,{span:8},r.a.createElement(se.a.Item,{label:"Category"},s("category",{initialValue:i.category,rules:[{required:!0,message:"Please select the category!"}]})(r.a.createElement(fe.a,{placeholder:"Select a category",onChange:ce},C.map((function(e,t){return r.a.createElement(Ue,{value:e.id,key:t},e.name)})))))),r.a.createElement(Ee.a,{span:8},z.length>0&&r.a.createElement(se.a.Item,{label:"Type"},s("type",{initialValue:i.type,rules:[{required:!0,message:"Please select the type!"}]})(r.a.createElement(fe.a,{placeholder:"Select a type",onChange:oe},z.map((function(e,t){return r.a.createElement(Ue,{value:e.id,key:t},e.name)})))))),r.a.createElement(Ee.a,{span:8},F.length>0&&r.a.createElement(se.a.Item,{label:"Tag"},s("tag",{initialValue:i.tag})(r.a.createElement(fe.a,{placeholder:"Select a tag"},F.map((function(e,t){return r.a.createElement(Ue,{value:e.id,key:t},e.name)}))))))),r.a.createElement(_e.a,null),r.a.createElement(be.a,null,r.a.createElement(se.a.Item,{label:"Details"},s("details",{initialValue:i.details})(r.a.createElement(Ae,{placeholder:"Details",initialValue:i.details,onChangeHandler:function(e){d({details:e})}})))),r.a.createElement(_e.a,null),r.a.createElement(be.a,null,r.a.createElement(se.a.Item,{label:"Description"},s("description",{initialValue:i.description})(r.a.createElement(Ae,{placeholder:"Description",initialValue:i.description,onChangeHandler:function(e){d({description:e})}})))),r.a.createElement(_e.a,null),r.a.createElement(be.a,null,r.a.createElement(se.a.Item,{label:"Main Price",className:"price-input"},s("mainPrice",{initialValue:i.mainPrice})(r.a.createElement(ue.a,{size:"large"})))),r.a.createElement(_e.a,null),r.a.createElement(be.a,null,r.a.createElement(se.a.Item,{label:"Is Best Product:"},s("isBest",{initialValue:i.isBest})(r.a.createElement(Pe.a,{checked:f("isBest")})))),r.a.createElement(_e.a,null),r.a.createElement(be.a,null,r.a.createElement(se.a.Item,{label:"Is Handmade Product:"},s("isHandmade",{initialValue:i.isHandmade})(r.a.createElement(Pe.a,{checked:f("isHandmade")})))),r.a.createElement(_e.a,null),r.a.createElement(be.a,null,r.a.createElement(se.a.Item,{label:"Is Product Out Of Stock:"},s("isOutOfStuck",{initialValue:i.isOutOfStuck})(r.a.createElement(Pe.a,{checked:f("isOutOfStuck")})))),r.a.createElement(_e.a,null),r.a.createElement(be.a,null,r.a.createElement(Ee.a,{span:8},r.a.createElement(se.a.Item,{label:"Product Place:"},s("sortPlace",{initialValue:i.sortPlace||J})(r.a.createElement(fe.a,{showSearch:!0,placeholder:"Select a product",optionFilterProp:"children",filterOption:function(e,t){return(Array.isArray(t.props.children)?t.props.children.join(""):t.props.children).toLowerCase().indexOf(e.toLowerCase())>=0}},r.a.createElement(Ue,{value:U,style:{color:"#7bb3b3"}},"At First"),r.a.createElement(Ue,{value:J,style:{color:"#7bb3b3"}},"At Last"),o.map((function(e){var t=e.id,a=e.name;return i.name!==a&&r.a.createElement(Ue,{key:t,value:t},"Before: ",a)}))))))),r.a.createElement(_e.a,null),r.a.createElement(be.a,null,r.a.createElement(be.a,null,r.a.createElement(Me,{level:4},"Sizes")),A.map((function(e,t){return r.a.createElement("div",{key:t},r.a.createElement(se.a.Item,{className:"hidden"},s("sizeRefId".concat(e),{initialValue:i["sizeRefId".concat(e)]})(r.a.createElement(ue.a,null))),r.a.createElement(be.a,{gutter:[5,0],key:e},r.a.createElement(Ee.a,{span:3},r.a.createElement(se.a.Item,{label:"Size:"},s("sizeOption".concat(e),{initialValue:i["sizeOption".concat(e)]})(r.a.createElement(fe.a,{placeholder:"Select a size"},v.map((function(e,t){return r.a.createElement(Ue,{value:e.id,key:t},e.name)})))))),r.a.createElement(Ee.a,{span:3},r.a.createElement(se.a.Item,{label:"Size detail:"},s("sizeDetail".concat(e),{initialValue:i["sizeDetail".concat(e)]})(r.a.createElement(ue.a,null)))),r.a.createElement(Ee.a,{span:3},r.a.createElement(se.a.Item,{label:"Size Price:"},s("sizePrice".concat(e),{initialValue:i["sizePrice".concat(e)]})(r.a.createElement(ue.a,null)))),r.a.createElement(Ee.a,{span:3},r.a.createElement(se.a.Item,{label:"Height:"},s("sizeHeight".concat(e),{initialValue:i["sizeHeight".concat(e)]})(r.a.createElement(ue.a,null)))),r.a.createElement(Ee.a,{span:3},r.a.createElement(se.a.Item,{label:"Chest:"},s("sizeChest".concat(e),{initialValue:i["sizeChest".concat(e)]})(r.a.createElement(ue.a,null)))),r.a.createElement(Ee.a,{span:3},r.a.createElement(se.a.Item,{label:"Waist:"},s("sizeWaist".concat(e),{initialValue:i["sizeWaist".concat(e)]})(r.a.createElement(ue.a,null)))),r.a.createElement(Ee.a,{span:3},r.a.createElement(se.a.Item,{label:"Hips:"},s("sizeHips".concat(e),{initialValue:i["sizeHips".concat(e)]})(r.a.createElement(ue.a,null)))),r.a.createElement(Ee.a,{span:3},r.a.createElement(se.a.Item,{label:"Neck:"},s("sizeNeck".concat(e),{initialValue:i["sizeNeck".concat(e)]})(r.a.createElement(ue.a,null)))),r.a.createElement(Ee.a,{span:3},r.a.createElement(se.a.Item,{label:"Shoulders:"},s("sizeShoulders".concat(e),{initialValue:i["sizeShoulders".concat(e)]})(r.a.createElement(ue.a,null)))),r.a.createElement(Ee.a,{span:3},r.a.createElement(se.a.Item,{label:"Sleeves:"},s("sizeSleeves".concat(e),{initialValue:i["sizeSleeves".concat(e)]})(r.a.createElement(ue.a,null)))),r.a.createElement(Ee.a,{span:3},r.a.createElement(se.a.Item,{label:"Length:"},s("sizeLength".concat(e),{initialValue:i["sizeLength".concat(e)]})(r.a.createElement(ue.a,null)))),r.a.createElement(Ee.a,{span:3},r.a.createElement(se.a.Item,{label:"Total Height:"},s("sizeTotalHeight".concat(e),{initialValue:i["sizeTotalHeight".concat(e)]})(r.a.createElement(ue.a,null)))),r.a.createElement(Ee.a,{span:3},r.a.createElement(se.a.Item,{label:"Head Circumference:"},s("sizeHeadCircumference".concat(e),{initialValue:i["sizeHeadCircumference".concat(e)]})(r.a.createElement(ue.a,null)))),r.a.createElement(Ee.a,{span:3},r.a.createElement(se.a.Item,{label:"Foot Length:"},s("sizeFootLength".concat(e),{initialValue:i["sizeFootLength".concat(e)]})(r.a.createElement(ue.a,null)))),r.a.createElement(Ee.a,{span:3},1!==A.length&&r.a.createElement(me.a,{className:"m-t-43 m-r-5",type:"dashed",icon:"minus",onClick:function(){return function(e,t){var a=Object(xe.a)(A);a.splice(e,1),B(a)}(t)}}),t===A.length-1&&r.a.createElement(me.a,{className:"m-t-43",type:"dashed",icon:"plus",onClick:function(){return function(e){if(!!f("sizeOption"+e)){var t=Object(xe.a)(A);t.push(t[t.length-1]+1),B(t)}else le("please enter the size before adding a new one.")}(e)}})),r.a.createElement(Ee.a,{span:3})),1!==A.length&&t!==A.length-1&&r.a.createElement(_e.a,{dashed:!0}))}))),r.a.createElement(_e.a,null),r.a.createElement(be.a,null,r.a.createElement(be.a,null,r.a.createElement(Me,{level:4},"Colors & Images")),K.map((function(e,t){return r.a.createElement("div",{key:t},r.a.createElement(se.a.Item,{className:"hidden"},s("colorRefId".concat(e),{initialValue:i["colorRefId".concat(e)]})(r.a.createElement(ue.a,null))),r.a.createElement(be.a,{gutter:[10,0],key:e},r.a.createElement(Ee.a,{span:4},r.a.createElement(se.a.Item,{label:"Color: ".concat(e," index: ").concat(t)},s("colorOption".concat(e),{initialValue:i["colorOption".concat(e)]})(r.a.createElement(fe.a,{placeholder:"Select a color"},S.map((function(e,t){return r.a.createElement(Ue,{value:e.id,key:t},e.name)})))))),r.a.createElement(Ee.a,{span:4},r.a.createElement(se.a.Item,{label:"Color code:"},s("colorCode".concat(e),{initialValue:i["colorCode".concat(e)]})(r.a.createElement(ue.a,null)))),r.a.createElement(Ee.a,{span:8},r.a.createElement(se.a.Item,{label:"Color Images:",className:"product-image-upload"},s("colorImages".concat(e),{initialValue:i["colorImages".concat(e)]})(r.a.createElement(Fe.a,{listType:"picture-card",fileList:X[e],customRequest:function(t){return function(e,t){te({method:"FILE_POST",params:{product_image:e},url:M.imageUpload,showSuccessNotification:!0,successMessage:"Image uploaded successfully.",onSuccess:function(e){var a=Re({},X);a[t].push({uid:e.image_name,thumbUrl:D+e.image_link,name:e.image_name}),ee(a),d(Object(g.a)({},"colorImages".concat(t),a[t]))}})}(t.file,e)},onRemove:function(t){return function(e,t){var a=Re({},X),n=X[t].findIndex((function(t){var a=t.uid;return e.uid===a}));a[t].splice(n,1),ee(a),d(Object(g.a)({},"colorImages".concat(t),a[t]))}(t,e)}},X[e]&&X[e].length>=8?null:r.a.createElement(r.a.Fragment,null,r.a.createElement($.a,{type:"plus"}),r.a.createElement("div",{className:"ant-upload-text"},"Upload")))))),r.a.createElement(Ee.a,{span:4},r.a.createElement(se.a.Item,{label:"Set Default Color:"},s("colorDefault".concat(e),{initialValue:i["colorDefault".concat(e)]})(r.a.createElement(Pe.a,{checked:f("colorDefault".concat(e)),onChange:function(t){return function(e,t){Object.keys(h()).forEach((function(e){e.startsWith("colorDefault")&&t!=e[e.length-1]&&d(Object(g.a)({},e,!1))}))}(0,e)}})))),r.a.createElement(Ee.a,{span:4},1!==K.length&&r.a.createElement(me.a,{className:"m-t-43 m-r-5",type:"dashed",icon:"minus",onClick:function(){return function(e,t){var a=Object(xe.a)(K);a.splice(e,1),Z(a);var n=X;delete n[t],ee(n)}(t,e)}}),t===K.length-1&&r.a.createElement(me.a,{className:"m-t-43",type:"dashed",icon:"plus",onClick:function(){return function(e){if(!!f("colorOption"+e)){var t=Object(xe.a)(K),a=t[t.length-1];t.push(a+1),Z(t),ee(Re({},X,Object(g.a)({},a+1,[])))}else le("please enter the color before adding a new one.")}(e)}}))),1!==K.length&&t!==K.length-1&&r.a.createElement(_e.a,{dashed:!0}))}))),r.a.createElement(be.a,{className:"m-t-30"},r.a.createElement(se.a.Item,null,r.a.createElement(me.a,{type:"primary",htmlType:"submit",size:"large"},"Save")))))})),Be=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.keys(e).filter((function(e){return e.startsWith("sizeOption")})).map((function(t){var a=t[t.length-1];return{is_checked:!0,refId:e["sizeRefId".concat(a)],id:e["sizeOption".concat(a)],details:e["sizeDetail".concat(a)],height:e["sizeHeight".concat(a)],hips:e["sizeHips".concat(a)],chest:e["sizeChest".concat(a)],waist:e["sizeWaist".concat(a)],neck:e["sizeNeck".concat(a)],shoulders:e["sizeShoulders".concat(a)],sleeves:e["sizeSleeves".concat(a)],length:e["sizeLength".concat(a)],total_height:e["sizeTotalHeight".concat(a)],head_circumference:e["sizeHeadCircumference".concat(a)],foot_length:e["sizeFootLength".concat(a)],size_price:e["sizePrice".concat(a)],amount:e["sizeAmount".concat(a)]}}));return t[0].id?t:[]},Ge=function(e){var t=Object.keys(e).filter((function(e){return e.startsWith("colorOption")})).map((function(t){var a=t[t.length-1];return{is_checked:!0,refId:e["colorRefId".concat(a)],id:e["colorOption".concat(a)],product_color_code:e["colorCode".concat(a)],images:e["colorImages".concat(a)]?e["colorImages".concat(a)].map((function(e){return{image_name:e.name}})):[],amount:e["colorAmount".concat(a)]}}));return t[0].id?t.reverse():[]},We=function(e){var t=Object.keys(e).filter((function(t){return t.startsWith("colorDefault")&&!!e[t]}));if(0!==t.length){var a=t[0][t[0].length-1];return e["colorOption".concat(a)]}},qe=function(e,t){var a=ye(t,"sort_index"),n=t.map((function(e){return e.sort_index})),r=e===Math.min.apply(Math,Object(xe.a)(n)),c=e===Math.max.apply(Math,Object(xe.a)(n));switch(!0){case r:return U;case c:return J;default:var o=Math.min.apply(Math,Object(xe.a)(n.filter((function(t){return t>e}))));return o===1/0?J:a.data[o].id}},Ke=function(e,t){var a,n=e.sortPlace,r=ye(t,"id"),c=r.values().map((function(e){return e.sort_index})),o=Number(r.keys()[0]);switch(n){case J:a=null;break;case U:case o:var l=Math.min.apply(Math,Object(xe.a)(c));a=Number(Number(l-.1+1e-6).toFixed(6));break;default:var i=r.data[n].sort_index,s=Math.max.apply(Math,Object(xe.a)(c.filter((function(e){return e<i}))));for(a=Number(Number(s+1e-6).toFixed(6));c.includes(a);)a=Number(Number(a+1e-6).toFixed(6))}return a},Ze=function(e,t){return{name:e.name,slug:je(e.name),category_id:e.category,category_type_id:e.type,description:e.description,details:e.details,price:e.mainPrice,currency:"EUR",is_best:e.isBest?"1":"0",is_handmade:e.isHandmade?"1":"0",stock_status:e.isOutOfStuck?"0":"1",default_color_id:We(e),sort_index:Ke(e,t),sizes:Be(e),colors:Ge(e)}},Ye=function(e){var t;0===e.colors.length&&(t="There should be at least one color added."),0===e.sizes.length&&(t="There should be at least one size added.");var a=e.colors.map((function(e){return e.id}));Se(a)&&(t="Colors can not be duplicated, each color should be different from the other.");var n=e.sizes.map((function(e){return e.id}));return Se(n)&&(t="Sizes can not be duplicated, each size should be different from the other."),!t||(m.a.warning({placement:"bottomRight",errorMessage:"An error occured!",duration:7,description:t}),!1)};a(498);var $e=se.a.create({name:"loginForm"})((function(){var e=Object(n.useContext)(f).setHeaderComponent,t=H().doFetch,a=H({url:M.productListGet,defaultValue:[]}).data,c=Object(n.useState)(!1),o=Object(p.a)(c,2),l=o[0],i=o[1];return Object(n.useEffect)((function(){return e(r.a.createElement("b",null,"Create new product")),function(){e(null)}}),[]),r.a.createElement("div",{className:"main"},l&&r.a.createElement(u.a,{to:"/"}),r.a.createElement("div",{className:"form-wrapper"},r.a.createElement(Je,{handleFormSubmit:function(e){var n=Ze(e,a);Ye(n)&&t({url:M.productCreate,params:n,onSuccess:function(e){return!!e.id&&i(!0)}})},productsList:a})),r.a.createElement("div",{className:"brief-wrapper hidden"},"sdcsa"))})),Qe=a(605),Xe=(a(499),Qe.a.TreeNode),et=ue.a.Search,tt=fe.a.Option;var at=se.a.create({name:"categoryForm"})((function(e){var t=e.form,a=t.getFieldDecorator,c=t.validateFields,o=t.setFieldsValue,l=t.resetFields,i=Object(n.useContext)(q),s=i.data.categories,u=void 0===s?[]:s,d=i.doCategoriesFetch,h=Object(n.useContext)(f).setHeaderComponent,g=ve(u),b=R(u),E=Object(n.useState)([]),O=Object(p.a)(E,2),y=O[0],v=O[1],j=Object(n.useState)(!0),S=Object(p.a)(j,2),C=S[0],k=S[1],w=Object(n.useState)(!1),z=Object(p.a)(w,2),N=z[0],x=z[1],P=Object(n.useState)([]),F=Object(p.a)(P,2),D=F[0],T=F[1],L=Object(n.useState)({}),V=Object(p.a)(L,2),A=V[0],U=V[1],J=Object(n.useState)({}),B=Object(p.a)(J,2),G=B[0],W=B[1],K=Object(n.useState)(""),Z=Object(p.a)(K,2),Y=Z[0],Q=Z[1],X=Object(n.useState)(""),ee=Object(p.a)(X,2),te=ee[0],ne=ee[1],re=H().doFetch,ce=H().doFetch,oe=H().doFetch;Object(n.useEffect)((function(){g&&g.length&&0===y.length&&v(g.map((function(e){return e.id})))}),[g]),Object(n.useEffect)((function(){return JSON.stringify(u)!==JSON.stringify(b)&&h(r.a.createElement("b",null,"Total categories ",u.length)),function(){h(null)}}),[u]);var le=[];!function e(t){for(var a=0;a<t.length;a++){var n=t[a],r=n.key,c=n.name;le.push({key:r,name:c}),n.children&&e(n.children)}}(g);var ie=function(){Y?ce({url:M.categoryUpdate({slug:G.slug}),params:{name:Y},method:"POST",showSuccessNotification:!0,successMessage:"Category ".concat(Y," has been updated"),onSuccess:function(e){d(),W({}),Q("")}}):m.a.warning({placement:"bottomRight",message:"Please fill the category name!",duration:4})},de=function(){x(!1),T([]),l()},pe=function(){var e=Object(_.a)(I.a.mark((function e(t){var a,n,r,o;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,c();case 3:a=e.sent,n=a.categoryName,r=a.parentCategory,o=a.parentType,oe({url:M.categoryCreate,params:{name:n,slug:je(n),parent_id:o||r},method:"POST",showSuccessNotification:!0,successMessage:"Category ".concat(n," has been created"),onSuccess:function(e){d(),de()}});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),he=function(e){return r.a.createElement($.a,{type:"edit",onClick:function(){W(e),Q(e.name)},className:"m-l-20 m-r-15",theme:"twoTone",twoToneColor:"#1890ff"})},ge=function(e){return r.a.createElement($.a,{type:"delete",onClick:function(){return U(e)},theme:"twoTone",twoToneColor:"#f5222d"})};return r.a.createElement(be.a,null,r.a.createElement(me.a,{className:"category-add-btn",type:"primary",icon:"folder-add",onClick:function(){return x(!0)}},"Add New Category"),r.a.createElement(et,{style:{marginBottom:8},placeholder:"Search",onChange:function(e){var t=e.target.value,a=le.map((function(e){return e.name&&e.name.indexOf(t)>-1?function e(t,a){for(var n,r=0;r<a.length;r++){var c=a[r];c.children&&(c.children.some((function(e){return e.key===t}))?n=c.key:e(t,c.children)&&(n=e(t,c.children)))}return n}(e.key,g):null})).filter((function(e,t,a){return e&&a.indexOf(e)===t}));ne(t),v(a),k(!0)}}),r.a.createElement(Qe.a,{onExpand:function(e){v(e),k(!0)},expandedKeys:y,autoExpandParent:C},function e(t){return t.map((function(t,a){var n=t.name.indexOf(te),c=t.name.substr(0,n),o=t.name.substr(n+te.length),l=n>-1?r.a.createElement("h3",{className:"category-item"},c,r.a.createElement("span",{style:{color:"#f50"}},te),o,he(t),ge(t)):r.a.createElement("h3",{className:"category-item"},t.name,he(t),ge(t));return t.children?r.a.createElement(Xe,{key:t.key,title:l},e(t.children)):r.a.createElement(Xe,{key:t.key,title:l})}))}(g)),r.a.createElement(ae.a,{title:"Delete category - ".concat(A.name),visible:!!A.id,onOk:function(){re({url:M.categoryDelete({slug:A.slug}),method:"POST",showSuccessNotification:!0,successMessage:"Category ".concat(A.name," has been deleted"),onSuccess:function(e){d(),U({})}})},onCancel:function(){return U({})}},"would you really like to Delete ",r.a.createElement("b",null,A.name)," category?"),r.a.createElement(ae.a,{title:"Update category - ".concat(G.name),visible:!!G.id,onOk:ie,onCancel:function(){return W({})}},r.a.createElement(ue.a,{value:Y,onPressEnter:ie,onChange:function(e){return Q(e.target.value)}})),r.a.createElement(ae.a,{title:"Create new category",visible:N,onOk:pe,okText:"Create",onCancel:de},r.a.createElement(se.a,{onSubmit:pe,className:"login-form"},r.a.createElement(se.a.Item,{label:"Name"},a("categoryName",{rules:[{required:!0,message:"Please enter category name!"}]})(r.a.createElement(ue.a,{placeholder:"Name",size:"large"}))),r.a.createElement(se.a.Item,{label:"Under Category"},a("parentCategory")(r.a.createElement(fe.a,{placeholder:"Select a category",onChange:function(e){var t=g.findIndex((function(t){var a=t.id;return e===a}));T(g[t].children),o({parentType:void 0})}},g.map((function(e,t){return r.a.createElement(tt,{value:e.id,key:t},e.name)}))))),D.length>0&&r.a.createElement(se.a.Item,{label:"Under Type"},a("parentType")(r.a.createElement(fe.a,{placeholder:"Select a type"},D.map((function(e,t){return r.a.createElement(tt,{value:e.id,key:t},e.name)}))))))))})),nt=a(610);var rt=function(){var e=Object(n.useContext)(q),t=e.data.sizes,a=void 0===t?[]:t,c=e.doSizesFetch,o=Object(n.useContext)(f).setHeaderComponent,l=R(a),i=Object(n.useState)({}),s=Object(p.a)(i,2),u=s[0],d=s[1],h=Object(n.useState)({}),g=Object(p.a)(h,2),b=g[0],E=g[1],O=Object(n.useState)(""),y=Object(p.a)(O,2),v=y[0],j=y[1],S=Object(n.useState)(!1),C=Object(p.a)(S,2),k=C[0],w=C[1],z=Object(n.useState)(""),N=Object(p.a)(z,2),x=N[0],I=N[1],_=H().doFetch,P=H().doFetch,F=H().doFetch;Object(n.useEffect)((function(){return JSON.stringify(a)!==JSON.stringify(l)&&o(r.a.createElement("b",null,"Total sizes ",a.length)),function(){o(null)}}),[a]);var D=function(){w(!1),I("")},T=function(){v?P({url:M.sizeUpdate({slug:b.slug}),params:{name:v},method:"POST",showSuccessNotification:!0,successMessage:"Size ".concat(v," has been updated"),onSuccess:function(e){c(),E({}),j("")}}):m.a.warning({placement:"bottomRight",message:"Please fill the size name!",duration:4})},L=function(){x?_({url:M.sizeCreate,params:{name:x,slug:je(x)},method:"POST",showSuccessNotification:!0,successMessage:"Size ".concat(x," has been created"),onSuccess:function(e){c(),D()}}):m.a.warning({placement:"bottomRight",message:"Please fill the size name!",duration:4})};return r.a.createElement(be.a,null,r.a.createElement(be.a,null,r.a.createElement(me.a,{className:"f-r",type:"primary",icon:"folder-add",onClick:function(){return w(!0)}},"Add New Category")),r.a.createElement("h3",{style:{marginBottom:16}},"Available Sizes:"),r.a.createElement(nt.a,{bordered:!0,dataSource:a,renderItem:function(e){return r.a.createElement(nt.a.Item,{className:"f-s-20"},e.name,r.a.createElement("div",{className:"f-r"},r.a.createElement($.a,{type:"edit",onClick:function(){E(e),j(e.name)},className:"m-l-20 m-r-30",theme:"twoTone",twoToneColor:"#1890ff"}),r.a.createElement($.a,{type:"delete",onClick:function(){return d(e)},theme:"twoTone",twoToneColor:"#f5222d"})))}}),r.a.createElement(ae.a,{title:"Delete size - ".concat(u.name),visible:!!u.id,onOk:function(){F({url:M.sizeDelete({slug:u.slug}),method:"POST",showSuccessNotification:!0,successMessage:"Size ".concat(u.name," has been deleted"),onSuccess:function(e){c(),d({})}})},onCancel:function(){return d({})}},"would you really like to Delete ",r.a.createElement("b",null,u.name)," size?"),r.a.createElement(ae.a,{title:"Update size - ".concat(b.name),visible:!!b.id,onOk:T,onCancel:function(){return E({})}},r.a.createElement(ue.a,{value:v,onPressEnter:T,onChange:function(e){return j(e.target.value)}})),r.a.createElement(ae.a,{title:"Create new size",visible:k,onOk:L,onCancel:D},"name:",r.a.createElement(ue.a,{value:x,onPressEnter:L,onChange:function(e){return I(e.target.value)}})))},ct=a(191);var ot=function(){var e=Object(n.useContext)(q),t=e.data.colors,a=void 0===t?[]:t,c=e.doColorsFetch,o=Object(n.useContext)(f).setHeaderComponent,l=R(a),i=Object(n.useState)({}),s=Object(p.a)(i,2),u=s[0],d=s[1],h=Object(n.useState)({}),g=Object(p.a)(h,2),b=g[0],E=g[1],O=Object(n.useState)(""),y=Object(p.a)(O,2),v=y[0],j=y[1],S=Object(n.useState)(!1),C=Object(p.a)(S,2),k=C[0],w=C[1],z=Object(n.useState)(""),N=Object(p.a)(z,2),x=N[0],I=N[1],_=Object(n.useState)([]),P=Object(p.a)(_,2),F=P[0],D=P[1],T=H().doFetch,L=H().doFetch,V=H().doFetch;Object(n.useEffect)((function(){return JSON.stringify(a)!==JSON.stringify(l)&&o(r.a.createElement("b",null,"Total colors ",a.length)),function(){o(null)}}),[a]);var A=function(){w(!1),D([]),I("")},U=function(e){var t=Object(xe.a)(F).map((function(t,a){return e===a&&(t.isVisible=!t.isVisible),t}));D(t)},J=function(e,t){if(t||0===t){var a=Object(xe.a)(F).map((function(a,n){return t===n&&(a.hexCode=e,a.isVisible=!a.isVisible),a}));D(a)}else D([{hexCode:null,isVisible:!1}])},B=function(){var e=Object(xe.a)(F);e.push({hexCode:null,isVisible:!1}),D(e)},G=function(e){var t=Object(xe.a)(F);t.splice(e,1),D(t)},W=function(){v?L({url:M.colorUpdate({slug:b.slug}),params:{name:v,hex_code:F.map((function(e){return e.hexCode})).join(",")},method:"POST",showSuccessNotification:!0,successMessage:"Color ".concat(v," has been updated"),onSuccess:function(e){c(),E({}),j("")}}):m.a.warning({placement:"bottomRight",message:"Please fill the color name!",duration:4})},K=function(){x?T({url:M.colorCreate,params:{name:x,slug:je(x),hex_code:F.map((function(e){return e.hexCode})).join(",")},method:"POST",showSuccessNotification:!0,successMessage:"Color ".concat(x," has been created"),onSuccess:function(e){c(),A()}}):m.a.warning({placement:"bottomRight",message:"Please fill the color name!",duration:4})};return r.a.createElement(be.a,null,r.a.createElement(be.a,null,r.a.createElement(me.a,{className:"f-r",type:"primary",icon:"folder-add",onClick:function(){return w(!0)}},"Add New Category")),r.a.createElement("h3",{style:{marginBottom:16}},"Available Colors:"),r.a.createElement(nt.a,{bordered:!0,dataSource:a,renderItem:function(e){return r.a.createElement(nt.a.Item,{className:"f-s-20"},r.a.createElement("div",{className:"w-100"},r.a.createElement("div",{className:"f-l"},r.a.createElement("span",{className:"m-r-30"},e.name),e.hex_code&&e.hex_code.split(",").map((function(t,a){return r.a.createElement("span",{key:a}," ",r.a.createElement("span",{style:{color:t}},t)," ",e.hex_code.split(",").length-1!==a&&"-")}))),r.a.createElement("div",{className:"f-r"},r.a.createElement($.a,{type:"edit",onClick:function(){return function(e){if(E(e),j(e.name),e.hex_code){var t=e.hex_code.split(",").map((function(e){return{hexCode:e,isVisible:!1}}));D(t)}}(e)},className:"m-l-20 m-r-30",theme:"twoTone",twoToneColor:"#1890ff"}),r.a.createElement($.a,{type:"delete",onClick:function(){return d(e)},theme:"twoTone",twoToneColor:"#f5222d"}))))}}),r.a.createElement(ae.a,{title:"Delete color - ".concat(u.name),visible:!!u.id,onOk:function(){V({url:M.colorDelete({slug:u.slug}),method:"POST",showSuccessNotification:!0,successMessage:"Color ".concat(u.name," has been deleted"),onSuccess:function(e){c(),d({})}})},onCancel:function(){return d({})}},"would you really like to Delete ",r.a.createElement("b",null,u.name)," color?"),r.a.createElement(ae.a,{title:"Update color - ".concat(b.name),visible:!!b.id,onOk:W,onCancel:function(){E({}),D([])}},r.a.createElement("div",{className:"m-b-10"},"Name:"),r.a.createElement(ue.a,{value:v,className:"m-b-30",onPressEnter:W,onChange:function(e){return j(e.target.value)}}),r.a.createElement("div",{className:"m-b-10"},"Color Hex:"),0===F.length&&r.a.createElement(me.a,{onClick:J},"Add Colors hex code"),F.map((function(e,t){return r.a.createElement("div",{key:t,className:"m-t-10"},r.a.createElement("span",{className:"m-r-10"},t+1,". hex"),r.a.createElement(me.a,{style:{backgroundColor:e.hexCode,width:e.hexCode?"100px":"200px",height:"25px"},onClick:function(){return U(t)}},!e.hexCode&&"Click to set the color"),e.isVisible&&r.a.createElement("div",{style:{position:"absolute"}},r.a.createElement(ct.SketchPicker,{color:e.hexCode||"#eeeeee",onChangeComplete:function(e){var a=e.hex;return J(a,t)}})),r.a.createElement(me.a,{style:{height:"25px"},className:"m-l-20",icon:"minus",onClick:function(){return G(t)}}),t===F.length-1&&r.a.createElement(me.a,{style:{height:"25px"},className:"m-l-5",icon:"plus",onClick:B}))}))),r.a.createElement(ae.a,{title:"Create new color",visible:k,onOk:K,onCancel:A},r.a.createElement("div",{className:"m-b-10"},"Name:"),r.a.createElement(ue.a,{value:x,className:"m-b-30",onPressEnter:K,onChange:function(e){return I(e.target.value)}}),r.a.createElement("div",{className:"m-b-10"},"Color Hex:"),0===F.length&&r.a.createElement(me.a,{onClick:J},"Add Colors hex code"),F.map((function(e,t){return r.a.createElement("div",{key:t,className:"m-t-10"},r.a.createElement("span",{className:"m-r-10"},t+1,". hex"),r.a.createElement(me.a,{style:{backgroundColor:e.hexCode,width:e.hexCode?"100px":"200px",height:"25px"},onClick:function(){return U(t)}},!e.hexCode&&"Click to set the color"),e.isVisible&&r.a.createElement("div",{style:{position:"absolute"}},r.a.createElement(ct.SketchPicker,{color:e.hexCode||"#eeeeee",onChangeComplete:function(e){var a=e.hex;return J(a,t)}})),r.a.createElement(me.a,{style:{height:"25px"},className:"m-l-20",icon:"minus",onClick:function(){return G(t)}}),t===F.length-1&&r.a.createElement(me.a,{style:{height:"25px"},className:"m-l-5",icon:"plus",onClick:B}))}))))},lt=a(600),it=a(601),st=a(277),ut=a.n(st),mt=a(91);function dt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function pt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?dt(a,!0).forEach((function(t){Object(g.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):dt(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ft=fe.a.Option;var ht=[{path:"/",component:Ne,name:"Products",icon:"shop",showAlways:!0},{path:"/create-product",component:$e,name:"Create Product",icon:"upload",showAlways:!0},{path:"/categories",component:at,name:"Categories",icon:"menu-unfold",showAlways:!0},{path:"/sizes",component:rt,name:"Sizes",icon:"font-size",showAlways:!0},{path:"/colors",component:ot,name:"Colors",icon:"bg-colors",showAlways:!0},{path:"/demands",component:function(){var e,t=Object(n.useContext)(f).setHeaderComponent,a=H({url:M.demandsList,defaultValue:[],onSuccess:function(e){var t=[];t.push(["Name","Email","Phone Number","Subject","Message","Date","Sent From","Product Link"]);var a=e.map((function(e){return t.push([e.name,e.email,e.phone,e.subject,e.message,Ce(e.date_created,!0),e.product_id?"product page":"contact page",e.product_id?"".concat(D,"/").concat(e.product_id):""]),e.key=e.id,e}));j(a),w(t)}}).data,c=Object(n.useState)(""),o=Object(p.a)(c,2),l=o[0],i=o[1],s=Object(n.useState)(""),u=Object(p.a)(s,2),m=u[0],d=u[1],h=Object(n.useState)(""),g=Object(p.a)(h,2),b=g[0],E=g[1],O=Object(n.useState)([]),y=Object(p.a)(O,2),v=y[0],j=y[1],S=Object(n.useState)([]),C=Object(p.a)(S,2),k=C[0],w=C[1],z=R(v);Object(n.useEffect)((function(){return function(){t(null)}}),[]),Object(n.useEffect)((function(){JSON.stringify(z)!==JSON.stringify(v)&&t(P)}),[v]);var N=function(t){return{filterDropdown:function(a){var n=a.setSelectedKeys,c=a.selectedKeys,o=a.confirm,l=a.clearFilters;return r.a.createElement("div",{style:{padding:8}},r.a.createElement(ue.a,{ref:function(t){e=t},placeholder:"Search ".concat(t),value:c[0],onChange:function(e){return n(e.target.value?[e.target.value]:[])},onPressEnter:function(){return x(c,o,t)},style:{width:188,marginBottom:8,display:"block"}}),r.a.createElement(me.a,{type:"primary",onClick:function(){return x(c,o,t)},icon:"search",size:"small",style:{width:90,marginRight:8}},"Search"),r.a.createElement(me.a,{onClick:function(){return I(l)},size:"small",style:{width:90}},"Reset"))},filterIcon:function(e){return r.a.createElement($.a,{type:"search",style:{color:e?"#1890ff":void 0}})},onFilter:function(e,a){return a[t].toString().toLowerCase().includes(e.toLowerCase())},onFilterDropdownVisibleChange:function(t){t&&setTimeout((function(){return e.select()}))},render:function(e){return m===t?r.a.createElement(ut.a,{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:[l],autoEscape:!0,textToHighlight:e.toString()}):e}}},x=function(e,t,a){t(),i(e[0]),d(a)},I=function(e){e(),i("")},_=function(e){E(e);var t=e?a.filter((function(t){return"product"===e?t.product_id:!t.product_id})):a;j(t)};function P(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"filter-item"},r.a.createElement("b",null,"Demands count: ",v.length)),r.a.createElement("div",{className:"filter-item"},r.a.createElement("b",null,"Show demands from:"),r.a.createElement(fe.a,{value:b,className:"filter-select",onChange:_},r.a.createElement(ft,{value:""},"All"),r.a.createElement(ft,{value:"contact"},"Only from contact page"),r.a.createElement(ft,{value:"product"},"Only from products pages"))))}var F=[pt({title:"Name",dataIndex:"name",key:"name"},N("name")),pt({title:"Email",dataIndex:"email",key:"email"},N("email")),pt({title:"Phone Number",dataIndex:"phone",key:"phone"},N("phone")),{title:"Subject",dataIndex:"subject",key:"subject",render:function(e){return e&&e.length>20?r.a.createElement(lt.a,{className:"message-popover",content:e,title:"Subject"},e.substr(0,20),"..."):e}},{title:"Message",dataIndex:"message",key:"message",render:function(e){return e&&e.length>20?r.a.createElement(lt.a,{className:"message-popover",content:e,title:"Message"},e.substr(0,20),"..."):e}},{title:"Date",dataIndex:"date_created",key:"date_created",render:function(e){return Ce(e)}},{title:"Sent From",dataIndex:"product_id",key:"product_source",render:function(e){return r.a.createElement("span",null,e?"product":"contact"," page")}},{title:"Product",dataIndex:"product_id",key:"product_id",render:function(e){return e&&r.a.createElement("a",{href:"".concat(D,"/").concat(e),target:"_blank"},"see product")}}];return r.a.createElement(be.a,null,r.a.createElement("div",{className:"flex-r m-b-20"},r.a.createElement(mt.CSVLink,{data:k,filename:"demands-list"},r.a.createElement(me.a,{icon:"download"},"Download"))),r.a.createElement(it.a,{columns:F,dataSource:v}))},name:"Demands",icon:"file-search",showAlways:!0},{path:"/subscribers",component:function(){var e=Object(n.useContext)(f).setHeaderComponent;H({url:M.subscribersList,defaultValue:[],onSuccess:function(e){var t=[];t.push(["Email","Date"]);var a=e.map((function(e){return t.push([e.email,Ce(e.date_created,!0)]),e.key=e.id,e}));o(a),u(t)}});var t=Object(n.useState)([]),a=Object(p.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)([]),i=Object(p.a)(l,2),s=i[0],u=i[1],m=R(c);Object(n.useEffect)((function(){return function(){e(null)}}),[]),Object(n.useEffect)((function(){JSON.stringify(m)!==JSON.stringify(c)&&e(r.a.createElement("b",null,"Subscribers count ",c.length))}),[c]);var d=[{title:"Email",dataIndex:"email",key:"email"},{title:"Date",dataIndex:"date_created",key:"date_created",render:function(e){return Ce(e,!0)}}];return r.a.createElement(be.a,null,r.a.createElement("div",{className:"flex-r m-b-20"},r.a.createElement(mt.CSVLink,{data:s,filename:"subscribers-list"},r.a.createElement(me.a,{icon:"download"},"Download"))),r.a.createElement(it.a,{columns:d,dataSource:c}))},name:"Subscribers",icon:"notification",showAlways:!0},{path:"/users",component:function(){var e=Object(n.useContext)(f).setHeaderComponent;H({url:M.usersList,defaultValue:[],onSuccess:function(e){var t=[];t.push(["ID","Email","Date"]);var a=e.map((function(e){return t.push([e.id,e.email,Ce(e.date_created,!0)]),e.key=e.id,e}));o(a),u(t)}});var t=Object(n.useState)([]),a=Object(p.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)([]),i=Object(p.a)(l,2),s=i[0],u=i[1],m=R(c);Object(n.useEffect)((function(){return function(){e(null)}}),[e]),Object(n.useEffect)((function(){JSON.stringify(m)!==JSON.stringify(c)&&e(r.a.createElement("b",null,"Users count ",c.length))}),[c]);var d=[{title:"ID",dataIndex:"id",key:"id"},{title:"Email",dataIndex:"email",key:"email"},{title:"Date",dataIndex:"date_created",key:"date_created",render:function(e){return Ce(e)}}];return r.a.createElement(be.a,null,r.a.createElement("div",{className:"flex-r m-b-20"},r.a.createElement(mt.CSVLink,{data:s,filename:"users-list"},r.a.createElement(me.a,{icon:"download"},"Download"))),r.a.createElement(it.a,{columns:d,dataSource:c}))},name:"Users",icon:"user",showAlways:!0},{path:"/product/:productSlug",component:function(e){var t=e.match.params.productSlug,a=Object(n.useContext)(f).setHeaderComponent,c=H({url:M.productItemGet({slug:t}),defaultValue:{sizes:[],colors:[]},onSuccess:function(e){a(r.a.createElement("b",null,"Edit product: ",r.a.createElement("i",null,e.name)))},onError:function(e){d(!0)}}).data,o=H({url:M.productListGet,defaultValue:[]}).data,l=H().doFetch,i=Object(n.useState)(!1),s=Object(p.a)(i,2),m=s[0],d=s[1],h=Object(n.useState)(!1),g=Object(p.a)(h,2),b=g[0],E=g[1];Object(n.useEffect)((function(){return function(){a(null)}}),[]);var O={name:c.name,category:c.category_id,type:c.category_type_id,tag:c.category_tag_id,description:c.description,details:c.details,mainPrice:c.price,isBest:!!c.is_best,isHandmade:!!c.is_handmade,isOutOfStuck:!c.stock_status,sortPlace:qe(c.sort_index,o),sizeFieldsCountArr:c.sizes.length>0?c.sizes.map((function(e,t){return t})):[0],colorFieldsCountArr:c.colors.length>0?c.colors.map((function(e,t){return t})):[0]};return c.sizes.forEach((function(e,t){O["sizeOption".concat(t)]=e.size_id,O["sizeDetail".concat(t)]=e.size_details,O["sizePrice".concat(t)]=e.size_price,O["sizeHeight".concat(t)]=e.height,O["sizeChest".concat(t)]=e.chest,O["sizeWaist".concat(t)]=e.waist,O["sizeHips".concat(t)]=e.hips,O["sizeNeck".concat(t)]=e.neck,O["sizeShoulders".concat(t)]=e.shoulders,O["sizeSleeves".concat(t)]=e.sleeves,O["sizeLength".concat(t)]=e.length,O["sizeTotalHeight".concat(t)]=e.total_height,O["sizeHeadCircumference".concat(t)]=e.head_circumference,O["sizeFootLength".concat(t)]=e.foot_length,O["sizeRefId".concat(t)]=e.id})),c.colors.forEach((function(e,t){O["colorOption".concat(t)]=e.color_id,O["colorCode".concat(t)]=e.product_color_code,O["colorDefault".concat(t)]=c.default_color_id===e.color_id,O["colorRefId".concat(t)]=e.id,O["colorImages".concat(t)]=e.images&&e.images.map((function(e){return{name:e.image_name,thumbUrl:D+e.thumbnail_image_link,uid:e.id}}))})),O.imageListObj=O.colorFieldsCountArr.reduce((function(e,t){return e[t]=c.colors[t]&&c.colors[t].images.length>0?c.colors[t].images.map((function(e){return{name:e.image_name,thumbUrl:D+e.thumbnail_image_link,uid:e.id}})):[],e}),{}),b?r.a.createElement(u.a,{to:"/"}):m?r.a.createElement(ge.a,{description:"No product found!"}):r.a.createElement(Je,{handleFormSubmit:function(e){var t=Ze(e,o);delete t.slug,t.id=c.id;var a=c.sizes.map((function(e){return e.id})),n=t.sizes.map((function(e){return e.refId}));a.forEach((function(e){n.includes(e)||t.sizes.push({id:c.sizes.find((function(t){var a=t.id;return e===a})).size_id,is_checked:!1})}));var r=c.colors.map((function(e){return e.id})),i=t.colors.map((function(e){return e.refId}));r.forEach((function(e){i.includes(e)||t.colors.push({id:c.colors.find((function(t){var a=t.id;return e===a})).color_id,is_checked:!1})})),Ye(t)&&l({url:M.productUpdate({slug:c.slug}),params:t,showSuccessNotification:!0,onSuccess:function(e){return!!e.id&&E(!0)}})},productsList:o,productObj:O})},name:"Product details",icon:"team",showAlways:!1}],gt=[{path:"/login",component:de,name:"Dashboard",noAuth:!0},{path:"/",component:ie,name:"Main Layout"}];a(594);var bt=function(e){var t=e.history,a=i.a.get("authenticationToken"),c=Object(n.useContext)(f),o=c.loading,l=c.error,p=c.successNotification,h=Object(n.useContext)(q),g=h.doCategoriesFetch,b=h.doColorsFetch,E=h.doSizesFetch,O=h.data,y=O.categories,v=O.colors,j=O.sizes;return Object(n.useEffect)((function(){var e=V(l),t="authentication failed"===e;a&&((!y||0===y.length)&&g(),(!v||0===v.length)&&b(),(!j||0===j.length)&&E()),l&&!t&&m.a.error({placement:"bottomRight",message:"An error occured!",duration:3,description:e}),p&&m.a.success({placement:"bottomRight",message:p,duration:3}),t&&i.a.set("authenticationToken",null)}),[l,p,a]),r.a.createElement(n.Fragment,null,r.a.createElement(d.a,{spinning:o},r.a.createElement(s.a,{history:t,basename:B},r.a.createElement(u.d,null,gt.map((function(e){return r.a.createElement(u.b,{key:e.path,path:e.path,component:e.component})}))),!a&&r.a.createElement(u.a,{to:"/login"}))))};var Et=function(){var e=i.a.get("authenticationToken");return e&&L(e),r.a.createElement(h,null,r.a.createElement(K,null,r.a.createElement(bt,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(Et,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[280,1,2]]]);
//# sourceMappingURL=main.2dadf877.chunk.js.map